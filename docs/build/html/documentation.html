<!DOCTYPE html>
<html class="writer-html4" lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prise en main d’une Raspberry Pi &mdash; Documentation CAP_PROJET_4A 1</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="prev" title="Guide installation Home Assistant" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CAP_PROJET_4A
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Guide installation Home Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#creation-d-un-module-sur-home-assistant">Création d’un Module sur Home Assistant</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Prise en main d’une Raspberry Pi</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#premiere-utilisation-dune-raspberry-pi">Première utilisation d’une Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connexion-en-ssh">Connexion en SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-de-docker-sur-la-carte-raspberry-pi">Installation de Docker sur la carte Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-dune-automatisation-sur-home-assistant">Création d’une automatisation sur home assistant</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CAP_PROJET_4A</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Prise en main d’une Raspberry Pi</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/documentation.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="prise-en-main-d-une-raspberry-pi">
<h1>Prise en main d’une Raspberry Pi<a class="headerlink" href="#prise-en-main-d-une-raspberry-pi" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="premiere-utilisation-dune-raspberry-pi">
<h2>Première utilisation d’une Raspberry Pi<a class="headerlink" href="#premiere-utilisation-dune-raspberry-pi" title="Lien permanent vers ce titre">¶</a></h2>
<p>En cas de difficultés à formater la carte SD afin de pouvoir flasher l’image de la raspberry pi, l’utilisation de MiniTool Partiton Wizard sera utile</p>
<a class="reference internal image-reference" href="_images/minitool.png"><img alt="Alternative text" src="_images/minitool.png" style="width: 600px;" /></a>
<p>Insérez la carte micro SD dans votre ordinateur. S’il n’y a pas de partition dans la carte SD, il vaut mieux en créer une avec MiniTool, par la suite cliquer sur formater une partition</p>
<p>Téléchargez le «&nbsp;Raspberry Pi Imager&nbsp;» sur le lien suivant <a class="reference external" href="https://www.raspberrypi.com/software/">https://www.raspberrypi.com/software/</a>
Suivez les étapes suivantes :
Sélectionnez Raspberry Pi OS (other), Raspberry Pi OS Full (32-bit)
Modifiez le Hostname en votre nom p
Pour le stockage «&nbsp;Stockage&nbsp;», sélectionnez votre carte SD
Cliquez sur Save puis sur Ecrire comme sur l’image suivante :</p>
<a class="reference internal image-reference" href="_images/raspi.png"><img alt="Alternative text" src="_images/raspi.png" style="width: 600px;" /></a>
<p>Une fois que c’est fait, débranchez la carte micro SD et rebranchez là</p>
</div>
<div class="section" id="connexion-en-ssh">
<h2>Connexion en SSH<a class="headerlink" href="#connexion-en-ssh" title="Lien permanent vers ce titre">¶</a></h2>
<p>Activez la connexion ssh afin de pouvoir se connecter à la Raspberry Pi à distance
Tuto suivi : <a class="reference external" href="https://www.raspberrypi.com/documentation/computers/remote-access.html">https://www.raspberrypi.com/documentation/computers/remote-access.html</a>
Après avoir branché un micro SD une autre fois un nouveau lecteur ‘boot’ apparaît sur l’ordinateur
Ouvrez le dossier ‘boot’
Créez un fichier vide nommé ssh
Créez un fichier nommé ‘wpa_supplicant.conf’ et insérez dedans le code suivant :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">country</span><span class="o">=</span><span class="n">FR</span>
<span class="n">ctrl_interface</span><span class="o">=</span><span class="n">DIR</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">wpa_supplicant</span> <span class="n">GROUP</span><span class="o">=</span><span class="n">netdev</span>
<span class="n">update_config</span><span class="o">=</span><span class="mi">1</span>
<span class="n">network</span><span class="o">=</span><span class="p">{</span>
<span class="n">ssid</span><span class="o">=</span><span class="s2">&quot;NOM_DE_VOTRE_WIFI&quot;</span>
<span class="n">scan_ssid</span><span class="o">=</span><span class="mi">1</span>
<span class="n">psk</span><span class="o">=</span><span class="s2">&quot;VOTRE_MOT_DE_PASSE&quot;</span>
<span class="n">key_mgmt</span><span class="o">=</span><span class="n">WPA</span><span class="o">-</span><span class="n">PSK</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">si vous n’arrivez pas à créer un fichier .conf, prenez n’importe quel fichier .txt que vous avez et renommer le avec la commande suivante :
ren votre_fichier.txt wpa_supplicant.conf</p>
</div>
<p>Une fois que c’est fait insérez votre carte micro SD dans la Raspberry Pi
Branchez votre Raspberry Pi à une alimentation
Ouvrez un terminal sur votre ordinateur
Trouvez votre IP à l’aide de l’application « Fing » téléchargée directement sur votre téléphone ou sur windows  sur le lien suivant : <a class="reference external" href="https://www.fing.com/fing-desktop/fing-desktop-download-windows/">https://www.fing.com/fing-desktop/fing-desktop-download-windows/</a>
Maintenant vous pouvez faire un essai de la présence de votre carte Raspberry Pi avec la commande ping suivant de votre adresse IP trouvé précédemmentn vous devez avoir 0 paquets perdus (voir l’image suivante)</p>
<a class="reference internal image-reference" href="_images/ssh.png"><img alt="Alternative text" src="_images/ssh.png" style="width: 600px;" /></a>
<p>Le ping est fait sans paquets perdus
Maintenant que le ping est bien reussi, connectez-vous à la carte RaspberryPi avec la commande ssh suivi de <a class="reference external" href="mailto:votre_user&#37;&#52;&#48;votre_adresse_ip">votre_user<span>&#64;</span>votre_adresse_ip</a>
Exemple : ssh <a class="reference external" href="mailto:lila&#37;&#52;&#48;172&#46;20&#46;10&#46;6">lila<span>&#64;</span>172<span>&#46;</span>20<span>&#46;</span>10<span>&#46;</span>6</a>
Entrez votre mot de passe ensuite cliquez sur Entrer
Connexion réussie comme vous pouvez le voir sur l’image précédente
Branchez votre câble USB Zigbee à la Raspberry Pi</p>
</div>
<div class="section" id="installation-de-docker-sur-la-carte-raspberry-pi">
<h2>Installation de Docker sur la carte Raspberry Pi<a class="headerlink" href="#installation-de-docker-sur-la-carte-raspberry-pi" title="Lien permanent vers ce titre">¶</a></h2>
<p>On va créer un conteneur docker avec Home Assistant, c’est la meilleure méthode à utiliser car ça nous permet de ne pas perdre les autres services de la carte Raspberry Pi, on va ajouter home assistant uniquement comme un plus pour cela suivez les étapes suivante :
Installez docker avec la commande suivante :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">get</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span> <span class="o">|</span> <span class="n">sh</span>
</pre></div>
</div>
<p>Une fois que c’est fait : tapez la commande docker pour vérifier que docker est bel et bien installé (voir l’image suivante)</p>
<a class="reference internal image-reference" href="_images/docker.png"><img alt="Alternative text" src="_images/docker.png" style="width: 600px;" /></a>
<p>Installez home assistant avec la commande suivante</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pygments_style</span> <span class="o">=</span> <span class="s1">&#39;sphinx&#39;</span>
<span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> \
<span class="o">--</span><span class="n">name</span> <span class="n">homeassistant</span> \
<span class="o">--</span><span class="n">privileged</span> \
<span class="o">--</span><span class="n">restart</span><span class="o">=</span><span class="n">unless</span><span class="o">-</span><span class="n">stopped</span> \
<span class="o">-</span><span class="n">e</span> <span class="n">TZ</span><span class="o">=</span><span class="n">MY_TIME_ZONE</span> \
<span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">Chemin</span><span class="o">/</span><span class="n">vers_votre</span><span class="o">/</span><span class="n">dossier</span><span class="p">:</span><span class="o">/</span><span class="n">config</span> \
<span class="o">--</span><span class="n">network</span><span class="o">=</span><span class="n">host</span> \
<span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">home</span><span class="o">-</span><span class="n">assistant</span><span class="o">/</span><span class="n">home</span><span class="o">-</span><span class="n">assistant</span><span class="p">:</span><span class="n">stable</span>
<span class="n">test</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
<p>veuillez remplacer Chemin/vers_votre/dossier par le dossier dans lequel vous voulez stocker vos fichiers de configuration
Faites un ‘docker ps’ pour vérifier que votre home assistant est bien installé et en status up</p>
<a class="reference internal image-reference" href="_images/ps.png"><img alt="Alternative text" src="_images/ps.png" style="width: 600px;" /></a>
<p>Accès à home assistant via la raspberry pi sur windows</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">pour se connecter avec homeassistant sur windows on doit juste installer Docker desktop et créer un dossier nommé HA
par exemple et dans ce dossier on va créer un fichier compose.yml et un autre dossier config
(comme sur Linux, vous allez trouver dans le reste de la documentation l’explication détaillée)</p>
</div>
<p>Home Assistant lancera une interface web sur le port 8123 de votre Raspberry Pi. Vous pouvez y accéder sur <a class="reference external" href="http://ADRESSE_IP:8123">http://ADRESSE_IP:8123</a>.
Une fois que c’est fait, c’est maintenant le moment de se connecter à tous vos appareils intelligents et de commencer à jouer avec et créer des automatisations (oui c’est assez simple finalement)
Une fois que Home assistant est lancé, créez votre maison connectée et cliquez sur paramètres, vous allez voir que le câble USB Zigbee est directement detecté comme sur l’image suivante</p>
<a class="reference internal image-reference" href="_images/ha.png"><img alt="Alternative text" src="_images/ha.png" style="width: 600px;" /></a>
<p>On clique sur Zigbee Home Automation et on ajoute tous les appareils compatible avec Zigbee dedans
(pour ma part j’ai ajouté un module fil pilote, un capteur de température/humidité et un capteur de mouvement)
Cliquez ensuite sur Aperçu et si vous avez bien suivi les étapes précédentes vous aurez un tableau de bord comme sur l’image suivante :</p>
<a class="reference internal image-reference" href="_images/dash.png"><img alt="Alternative text" src="_images/dash.png" style="width: 600px;" /></a>
</div>
<div class="section" id="creation-dune-automatisation-sur-home-assistant">
<h2>Création d’une automatisation sur home assistant<a class="headerlink" href="#creation-dune-automatisation-sur-home-assistant" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cliquez sur paramètres, automatisations et scènes, créer sur automatisations, créer une nouvelle automatisation
voir l’image suivante</p>
<a class="reference internal image-reference" href="_images/auto1.png"><img alt="Alternative text" src="_images/auto1.png" style="width: 600px;" /></a>
<p>Suivez les étapes suivantes :</p>
<a class="reference internal image-reference" href="_images/auto2.png"><img alt="Alternative text" src="_images/auto2.png" style="width: 600px;" /></a>
<p>Cliquez sur Ajouter une condition puis sur Entité, puis sur valeur numérique, vous allez obtenir cela :</p>
<a class="reference internal image-reference" href="_images/auto3.png"><img alt="Alternative text" src="_images/auto3.png" style="width: 600px;" /></a>
<p>Maintenant on rajoute une action en cliquant sur ajouter une action puis sur appareil
On choisit l’appareil qu’on veut déclencher ou éteindre,
pour ma part j’ai choisi le Fan (ventilateur) il s’allume quand la température dépasse 22degré afin de la diminuer</p>
<a class="reference internal image-reference" href="_images/auto4.png"><img alt="Alternative text" src="_images/auto4.png" style="width: 600px;" /></a>
<p>Voilà, vous avez crée une autre automatisation où le chauffage (Heater) s’allume si la température est au-dessous de 19degré.
Vous pouvez également crée une automatisation qui consiste à recevoir une notification sur votre téléphone
Une alerte vous disant d’ouvrir les fenêtres si la température ou l’humidité sont dans la zone rouge et ou d’éteindre le chauffage
(le mettre en mode gel)</p>
<a class="reference internal image-reference" href="_images/auto5.jpg"><img alt="Alternative text" src="_images/auto5.jpg" style="width: 600px;" /></a>
<a class="reference internal image-reference" href="_images/auto6.jpg"><img alt="Alternative text" src="_images/auto6.jpg" style="width: 600px;" /></a>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Guide installation Home Assistant" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Horizon.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>